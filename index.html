<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://code.jquery.com/jquery-2.2.4.min.js"
      integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
      crossorigin="anonymous"
    ></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        list-style: none;
        text-decoration: none;
        box-sizing: border-box;
      }

      .process {
        flex-direction: column;
        justify-content: center;
        display: flex;
        position: fixed;
        width: 50rem;
        margin: 0px 40%;
      }

      .process .progress {
        justify-content: center;
        font-size: 2rem;
      }
      .bar {
        height: 100px;
      }
      li {
        font-size: 6rem;
      }
    </style>
    <title>인터렉션 스크롤 백분율 구하기</title>
  </head>
  <body>
    <div class="process">
      <h1>스크롤 백분율 구하기</h1>

      <article class="content">
        <div class="progress">
          <span class="bar"></span>
          <p class="txt">0%</p>
        </div>
      </article>
    </div>

    <ul class="list">
      <li>가</li>
      <li>나</li>
      <li>다</li>
      <li>라</li>
      <li>마</li>
      <li>바</li>
      <li>사</li>
      <li>아</li>
      <li>자</li>
      <li>차</li>
      <li>카</li>
      <li>타</li>
      <li>파</li>
      <li>하</li>
    </ul>
    <script>
      $(function () {
        $(window).scroll(function () {
          getPersent(); // 스크롤시 상시 콜백
        });

        var progressBar = $(".progress .bar");
        var text = $(".progress .txt");
        //console.log(text);

        function getPersent() {
          var scrollHeight = $(".list").height();
          var scrollRealHeight = $(".list").height() - $(window).height(); // 0% 백분율 초기 값 리스트 부분
          var winScrollTop = $(window).scrollTop(); // 현재 스크롤 위치
          var scrollPersent = (winScrollTop / scrollRealHeight) * 100;
          var textPersent = Math.round(scrollPersent);
          render(textPersent, scrollPersent);
        }

        function render(textPersent, scrollPersent) {
          // 스크롤 바와 텍스트 값을 상시 변경
          progressBar.css({
            wdith: scrollPersent + "%",
          });

          text.text(textPersent + "%");
        }

        function init() {
          getPersent();
        }

        init();
      });
    </script>
    <!-- <ul class="hi">
        <li class="my">하나</li>
        <li class="name">두울</li>
        <li class="is">새앳</li>
        <li class="jonghyeon">네엣</li>
    </ul> -->
  </body>
  <script>
    //돔 엘리먼트 활용
    // console.log($('.hi')); //제이쿼리로 값 찾기
    // $('.hi li').eq(1).slideDown(500);
    // console.log($('.hi li')); //제이쿼리로 값 찾기
    // console.log("-----------------------");
    // console.log($('.hi').children()); //해당 선택 태그의 자식들 찾기
    // console.log($('.hi').children().parent()); // 해당 선택 태그의 자식에 부모 찾기
    // console.log($('.hi').find('li'));
    // console.log("-----------------------");
    // $('.hi li').on('click', function() {
    //     var index = $('.hi li').index(this);
    //     console.log(index);
    // })

    // $('.hi li').eq(1).fadeOut(500); // 0.5초 후 모습이 점점 사라지며 디스플레이를 none 시키는 애니메이션
    // $('.hi li').eq(1).fadeIn(500); // 0.5초 후 모습이 점점 부드러지며 디스플레이를 on 시킨다.

    // $('.hi li').eq(1).hide(500);
    // $('.hi li').eq(1).show(500);

    // $('.hi li').eq(1).slideUp(500);
  </script>
</html>
